version: "3.1"

rules:
- rule: Activate form
  steps:
  - intent: item_start_generic
  - action: pizza_order_form
  - active_loop: pizza_order_form

- rule: greet
  steps:
  - intent: welcome_greet
  - action: utter_welcome_greet


- rule: submit form
  condition:
    - active_loop: pizza_order_form
  steps:
      - action: pizza_order_form      # run the form
      - active_loop: null
      - action: action_confirm_pizzas


- rule: out-of-scope
  steps:
  - intent: out_of_scope
  - action: utter_out_of_scope

- rule: start
  steps:
    - intent: init_request
    - action: utter_init_request


- rule: where are you?
  steps:
    - intent: request_restaurant_location
    - action: action_get_restaurant_location
    - action: utter_inform_restaurant_location
    - action: utter_anything_else

- rule: pizza questions
  steps:
    - intent: request_pizza_types
    - action: action_get_pizza_types

- rule: anti pizza
  steps:
    - intent: order_anti_pizza
    - slot_was_set:
      - anti_pizza_type: "true"
    - action: utter_anti_pizza
    - action: action_get_pizza_types